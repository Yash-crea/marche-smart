{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Marche Smart</title>
  <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<body>
  <header class="site-header">
    <nav class="navbar">
      <a class="brand" href="#">
        <div id="logo" class="logo" title="Marche Smart"> 
          <!-- simple interactive SVG logo -->
          <svg viewBox="0 0 64 64" width="40" height="40" aria-hidden="true">
            <circle cx="32" cy="32" r="28" class="logo-bg"/>
            <g class="cart">
              <rect x="18" y="20" width="28" height="12" rx="2"/>
              <path d="M22 32 L18 46 H46 L42 32"/>
              <circle cx="26" cy="50" r="2"/>
              <circle cx="42" cy="50" r="2"/>
            </g>
          </svg>
        </div>
        <span class="site-title">Marche Smart</span>
      </a>

      <form id="searchForm" class="search-form" role="search">
        <input id="searchInput" name="q" type="search" placeholder="Search products...">
        <button type="submit" aria-label="Search">Search</button>
      </form>

      <ul class="nav-links">
        <li><a href="{% url 'marche_smart:home' %}">Home</a></li>
        <li><a href="{% url 'marche_smart:shop' %}">Shop</a></li>
        <li><a href="{% url 'marche_smart:about' %}">About</a></li>
        <li>
          <a href="{% url 'marche_smart:cart' %}" class="cart-link">
            <svg viewBox="0 0 24 24" width="20" height="20">
              <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
            <span class="cart-count">{{ request.session.cart_count|default:0 }}</span>
          </a>
        </li>
        <li class="dropdown">
          <button id="loginBtn" class="dropbtn">Login ▾</button>
          <div id="loginMenu" class="dropdown-content" aria-hidden="true">
            <a href="{% url 'marche_smart:owner_login' %}">Owner Login</a>
            <a href="{% url 'marche_smart:customer_login' %}">Customer Login</a>
          </div>
        </li>
      </ul>
    </nav>
  </header>

  <main>
    {% block content %}

    <section id="home" class="hero">
      <h1>Welcome to Marche Smart</h1>
      <p>Smart supermarket shopping for SMEs — frontend prototype.</p>
    </section>

    <section id="shop" class="shop">
      <h2>Shop</h2>
      <p>Product grid / filters will go here.</p>
    </section>

    <section id="owner" class="owner-dashboard" hidden>
      <h2>Owner Dashboard (placeholder)</h2>
      <p>Sales, analytics and reports would appear here.</p>
    </section>

    <section id="customer" class="customer-dashboard" hidden>
      <h2>Customer Dashboard (placeholder)</h2>
      <p>Orders, purchase history and recommendations would appear here.</p>
    </section>
    {% endblock %}
  </main>

  <style>
    .cart-link {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: #333;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .cart-link:hover {
      color: #4CAF50;
    }

    .cart-link svg {
      fill: currentColor;
    }

    .cart-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #4CAF50;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: bold;
    }
  </style>

  <script src="{% static 'index.js' %}"></script>
</body>
</html>
